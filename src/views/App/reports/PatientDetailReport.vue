<template>
  <div>
    <div>
      <div class="row">
        <div class="col" id="imprimir">
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col">Expediente: <strong>{{ expediente }}</strong></div>
          <div class="col">Nombre de paciente: <strong>{{ paciente }}</strong></div>
          <div class="col">
            Fecha de nacimiento: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">
            Fecha de ingreso: {{ date[2] }}/{{ date[1] }}/{{ date[0] }}
          </div>
          <div class="col">Teléfono: {{ telefono }}</div>

          <br />
          <div class="col"><strong>FIN DEL DOCUMENTO</strong></div>
        </div>
        <div class="col" />
      </div>
      <div class="row">
        <div class="col"></div>
        <div class="col">
          <router-link
            class="btn btn-primary"
            :to="`/patient/history/${patientId}`"
          >
          VOLVER A PACIENTE
          </router-link>
          <button
            @click="imprimirRecibo()"
            class="btn btn-primary"
          >
            IMPRIMIR REPORTE
          </button>

        </div>
        <div class="col" />
      </div>
    </div>
  </div>
</template>
<script>
// import html2canvas from 'html2canvas'
import axios from 'axios'
import { apiUrl } from '../../../config/constant'
import JsPDF from 'jspdf'
export default {
  components: {
    // html2canvas
  },
  data () {
    return {
      sale: {},
      date: '',
      address: '',
      sales: [],
      seller: {},
      tienda: '',
      patientId: 0,
      expediente: 12345,
      paciente: 'Hola Pedro',
      telefono: '35130842',
      fecha: '13/3/2023'
    }
  },
  beforeMount () {
    this.patientId = this.$route.params.id
  },
  mounted () {
    let vm = this
    console.log()
    vm.limpiarVariables()
    axios
      .get(apiUrl + `/radiology/get?id=${this.patientId}`)
      .then(function (response) {
        console.log(response)
      })
      .catch(function (error) {
        console.log(error)
      })
  },
  methods: {
    parseDecimal (value) {
      return parseFloat(this.parseDecimalFixed(value))
    },
    parseDecimalFixed (value) {
      return parseFloat(value).toFixed(2)
    },
    calculateSubtotal (price, quantity, discount, value) {
      let amount = this.parseDecimalFixed(
        this.parseDecimal(price) * this.parseDecimal(quantity) -
          this.parseDecimal(discount)
      )
      let A = amount.split('.')
      if (value === 0) return A[0]
      else return A[1]
    },
    mytotal (amount, value) {
      let A = amount.split('.')
      if (value === 0) return A[0]
      else return A[1]
    },
    convertDate () {
      let date = new Date()
      var newDate = date.split('-')
      return newDate
    },
    imprimirRecibo () {
      var doc = new JsPDF()
      var img = new Image()
      img.src = 'https://scontent.fgua8-1.fna.fbcdn.net/v/t39.30808-6/310442795_463766639106504_8686365165497679257_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=09cbfe&_nc_ohc=hREVTCUhZxgAX8hI_M4&_nc_ht=scontent.fgua8-1.fna&oh=00_AfAePoTbnwHqonPltJipg4J6WAyq8QXka_Wpp6dgzsL2mg&oe=6417A016'

      // Define the header function
      var header = function () {
        // Add the image to the header
        doc.addImage(img, 'PNG', 10, 10, 40, 40) // Adjust the position and size of the image as needed

        // Add text to the header
        doc.text('Header Text', 60, 30) // Replace 'Header Text' with your actual header text
      }

      // Set the header and footer
      doc.setHeaderFunction(header)

      // Add content to the PDF document
      doc.text('Lorem ipsum dolor sit amet...', 10, 60)
      doc.save('Test.pdf')
    },
    limpiarVariables () {
      this.sale = {}
      this.date = ''
      this.address = ''
      this.sales = []
      this.seller = {}
    }
  }
}
</script>
<style scoped lang="scss">
h3 {
  margin: 40px 0 0;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  display: inline-block;
  margin: 0 10px;
}

a {
  color: #42b983
}
</style>
